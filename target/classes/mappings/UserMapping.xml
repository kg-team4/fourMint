<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="UserDAO">

	<resultMap type="user" id="userResult">
		<result property="email_id" column="EMAIL_ID" />
		<result property="password" column="PASSWORD" />
		<result property="name" column="NAME" />
		<result property="nickname" column="NICKNAME" />
		<result property="phone" column="PHONE" />
		<result property="address1" column="ADDRESS1" />
		<result property="address2" column="ADDRESS2" />
		<result property="address3" column="ADDRESS3" />
		<result property="birth" column="BIRTH" />
		<result property="gender" column="GENDER" />
		<result property="social_login" column="SOCIAL_LOGIN"/>
		<result property="snsid" column="SNSID"/>
		<result property="profile" column="PROFILE" />
	</resultMap>
	
	<insert id="insertUser" parameterType="user">
		INSERT INTO member (email_id, password, name, nickname, address1, address2, address3, phone, birth, gender) 
		VALUES (#{email_id}, #{password}, #{name}, #{nickname}, #{address1}, #{address2}, #{address3}, #{phone}, #{birth}, #{gender})
	</insert>
	
	<insert id="insertNaver" parameterType="user">
		INSERT INTO member (email_id, phone, birth, gender, social_login, snsid) 
		VALUES (#{email}, #{phone}, #{birth}, #{gender}, #{social_login}, #{naverid})
	</insert>
	
	<insert id="insertKakao" parameterType="user">
		INSERT INTO member (email_id, birth, nickname, gender, social_login, snsid) 
		VALUES (#{email}, #{birth}, #{nickname}, #{gender}, #{social_login}, #{kakaoid})  
	</insert>
	
	<select id="getUser" resultType="user">
		SELECT * FROM member WHERE email_id = #{email_id} AND password = #{password}
	</select>
	
	<select id="getUserFromNickname" resultType="user" parameterType="string">
		SELECT * FROM member WHERE nickname = #{nickname}
	</select>
	
	<select id="getAddress1" resultType="string">
		SELECT address1 FROM member WHERE email_id = #{email_id}
	</select>
	
	<select id="getAddress2" resultType="string">
		SELECT address2 FROM member WHERE email_id = #{email_id}
	</select>
	
	<select id="getAddress3" resultType="string">
		SELECT address3 FROM member WHERE email_id = #{email_id}
	</select>

	<select id="idCheck" resultType="int" parameterType="String">
		SELECT COUNT(email_id) FROM member WHERE email_id = #{email_id}
	</select>

	<select id="nickCheck" resultType="int" parameterType="String">
		SELECT COUNT(nickname) FROM member WHERE nickname = #{nickname}
	</select>
	
	<select id="phoneCheck" resultType="int" parameterType="String">
		SELECT COUNT(phone) FROM member WHERE phone = #{phone}
	</select>
	
	<select id="getByNaver" resultType="String" parameterType="String">
		SELECT snsid FROM member WHERE snsid = #{naverid}
	</select>
 
	<select id="getBySns" resultType="String" parameterType="String">
		SELECT social_login FROM member WHERE email_id = #{email}
	</select>
	
	<update id="updateProfile" parameterType="user">
		UPDATE member SET profile = #{profile} WHERE nickname = #{nickname}
	</update>
</mapper>